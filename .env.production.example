# =============================================================================
# StockFlow - Production Environment Variables (Railway Deployment)
# =============================================================================
#
# This file contains all environment variables needed for Railway deployment.
# Copy this file and fill in the values in Railway's service variables.
#
# IMPORTANT: Never commit secrets to version control!
#
# Variable Reference Syntax for Railway:
#   Use ${{ServiceName.VARIABLE_NAME}} to reference variables from other services
#   Example: ${{Postgres.DATABASE_URL}}
#
# =============================================================================

# =============================================================================
# BACKEND SERVICE (server/)
# =============================================================================

# -----------------------------------------------------------------------------
# Application Settings
# -----------------------------------------------------------------------------
NODE_ENV=production
PORT=3000

# Frontend URL for CORS (your production domain, no trailing slash)
FRONTEND_URL=https://your-domain.com

# Application URL (used in emails and links)
APP_URL=https://your-domain.com

# Admin email address
ADMIN_EMAIL=admin@your-domain.com

# -----------------------------------------------------------------------------
# Database - PostgreSQL (REQUIRED)
# -----------------------------------------------------------------------------
# Use Railway variable reference for PostgreSQL plugin:
# DATABASE_URL=${{Postgres.DATABASE_URL}}
#
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=public
DATABASE_URL=postgresql://postgres:password@host:5432/railway?schema=public

# -----------------------------------------------------------------------------
# Authentication - JWT (REQUIRED)
# -----------------------------------------------------------------------------
# Generate secure secrets with: openssl rand -base64 64
#
JWT_SECRET=<generate-64-char-secret-with-openssl-rand-base64-64>
JWT_REFRESH_SECRET=<generate-different-64-char-secret>
JWT_EXPIRATION=15m
JWT_REFRESH_EXPIRATION=7d

# -----------------------------------------------------------------------------
# Redis Cache (OPTIONAL - falls back to in-memory cache)
# -----------------------------------------------------------------------------
# Use Railway variable references for Redis plugin:
# REDIS_HOST=${{Redis.REDISHOST}}
# REDIS_PORT=${{Redis.REDISPORT}}
# REDIS_PASSWORD=${{Redis.REDISPASSWORD}}
#
REDIS_HOST=
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
CACHE_TTL=300

# -----------------------------------------------------------------------------
# Email - Brevo (REQUIRED for email functionality)
# -----------------------------------------------------------------------------
# Get your API key at: https://app.brevo.com/settings/keys/api
# The sender email MUST be verified in your Brevo account
#
BREVO_API_KEY=xkeysib-your-api-key-here
BREVO_SENDER_EMAIL=noreply@your-domain.com
BREVO_SENDER_NAME=StockFlow

# -----------------------------------------------------------------------------
# Security - Arcjet (RECOMMENDED for production)
# -----------------------------------------------------------------------------
# Get your API key at: https://app.arcjet.com
# Provides rate limiting, bot protection, and API security
#
ARCJET_KEY=ajkey_your-arcjet-api-key
ARCJET_ENABLED=true

# -----------------------------------------------------------------------------
# OAuth - Google (OPTIONAL)
# -----------------------------------------------------------------------------
# Create OAuth credentials at: https://console.cloud.google.com/apis/credentials
#
# Authorized JavaScript origins:
#   - https://your-domain.com
#   - https://api.your-domain.com
#
# Authorized redirect URIs:
#   - https://api.your-domain.com/auth/google/callback
#
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_CALLBACK_URL=https://api.your-domain.com/auth/google/callback

# -----------------------------------------------------------------------------
# OAuth - GitHub (OPTIONAL)
# -----------------------------------------------------------------------------
# Create OAuth App at: https://github.com/settings/developers
#
# Homepage URL: https://your-domain.com
# Authorization callback URL: https://api.your-domain.com/auth/github/callback
#
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret
GITHUB_CALLBACK_URL=https://api.your-domain.com/auth/github/callback

# -----------------------------------------------------------------------------
# Payments - Stripe (OPTIONAL)
# -----------------------------------------------------------------------------
# Get API keys at: https://dashboard.stripe.com/apikeys
# Use sk_live_... for production (not sk_test_...)
#
# Webhook endpoint: https://api.your-domain.com/stripe/webhook
# Events to send: customer.subscription.*, invoice.*, payment_intent.*
#
STRIPE_SECRET_KEY=sk_live_your-stripe-secret-key
STRIPE_WEBHOOK_SECRET=whsec_your-webhook-signing-secret

# Stripe Price IDs for subscription plans
# Create products and prices in Stripe Dashboard
STRIPE_PRICE_BASIC=price_basic_plan_id
STRIPE_PRICE_PRO=price_pro_plan_id
STRIPE_PRICE_ENTERPRISE=price_enterprise_plan_id


# =============================================================================
# FRONTEND SERVICE (client/)
# =============================================================================

# -----------------------------------------------------------------------------
# Application Settings
# -----------------------------------------------------------------------------
NODE_ENV=production
PORT=3001

# -----------------------------------------------------------------------------
# API URLs
# -----------------------------------------------------------------------------
# API_URL: Used for server-side rendering (SSR) requests
# This should be the internal Railway network URL for service-to-service communication
#
# Use Railway variable reference:
# API_URL=http://${{backend.RAILWAY_PRIVATE_DOMAIN}}:3000
#
API_URL=http://backend.railway.internal:3000

# VITE_API_URL: Embedded at build time for client-side API requests
# This is the public-facing API URL that browsers will call
#
# Option A: Same domain with /api prefix (if using proxy/rewrite)
# VITE_API_URL=/api
#
# Option B: Separate API subdomain (recommended)
# VITE_API_URL=https://api.your-domain.com
#
VITE_API_URL=https://api.your-domain.com


# =============================================================================
# RAILWAY VARIABLE REFERENCES (Copy-Paste Ready)
# =============================================================================
#
# Use these in Railway's Variables UI to link services:
#
# PostgreSQL:
#   DATABASE_URL = ${{Postgres.DATABASE_URL}}
#
# Redis:
#   REDIS_HOST = ${{Redis.REDISHOST}}
#   REDIS_PORT = ${{Redis.REDISPORT}}
#   REDIS_PASSWORD = ${{Redis.REDISPASSWORD}}
#
# Backend Internal URL (for Frontend):
#   API_URL = http://backend.railway.internal:3000
#
# =============================================================================


# =============================================================================
# ENVIRONMENT VARIABLE CHECKLIST
# =============================================================================
#
# Backend Required:
# [ ] NODE_ENV=production
# [ ] PORT=3000
# [ ] DATABASE_URL (from Railway Postgres)
# [ ] JWT_SECRET (generate unique)
# [ ] JWT_REFRESH_SECRET (generate unique)
# [ ] FRONTEND_URL (your domain)
#
# Backend Recommended:
# [ ] BREVO_API_KEY
# [ ] BREVO_SENDER_EMAIL
# [ ] ARCJET_KEY
# [ ] ARCJET_ENABLED=true
#
# Backend Optional:
# [ ] REDIS_HOST, REDIS_PORT, REDIS_PASSWORD
# [ ] GOOGLE_CLIENT_ID, GOOGLE_CLIENT_SECRET, GOOGLE_CALLBACK_URL
# [ ] GITHUB_CLIENT_ID, GITHUB_CLIENT_SECRET, GITHUB_CALLBACK_URL
# [ ] STRIPE_SECRET_KEY, STRIPE_WEBHOOK_SECRET
#
# Frontend Required:
# [ ] NODE_ENV=production
# [ ] PORT=3001
# [ ] API_URL (internal backend URL)
# [ ] VITE_API_URL (public API URL)
#
# =============================================================================